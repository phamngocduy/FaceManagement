<input id="Upload" type="file" style="display:none" />
<canvas id="Canvas" style="width:100%;height:100vh"></canvas>

@section Scripts {
    <script>
        $(function () {
            $('#Upload').change(function () {
                if (this.files && this.files[0]) {
                    var reader = new FileReader();

                    reader.onload = function (e) {
                        var canvas = document.getElementById('Canvas');
                        var ctx = canvas.getContext('2d');
                        var image = new Image();

                        image.onload = function () {
                            var img = document.createElement("img");
                            img.src = e.target.result;

                            var ctx = canvas.getContext("2d");
                            ctx.drawImage(img, 0, 0);

                            var width = img.width;
                            var height = img.height;
                            console.log(width); console.log(height);

                            if (MAX_WIDTH * height / width <= MAX_HEIGHT) {
                                height = MAX_WIDTH * height / width;
                                width = MAX_WIDTH;
                            } else {
                                width = MAX_HEIGHT * width / height;
                                height = MAX_HEIGHT;
                            }
                            console.log(width); console.log(height);
                            canvas.width = width;
                            canvas.height = height;
                            var ctx = canvas.getContext("2d");
                            ctx.drawImage(img, 0, 0, width, height);
                            $(canvas).width('');
                            $(canvas).height('');
                        }

                        image.src = e.target.result;
                    };

                    reader.readAsDataURL(this.files[0]);
                }
            });

            $('#Canvas').height($('#Canvas').height() - $('#Canvas').offset().top);
            MAX_WIDTH = $('#Canvas').width(); MAX_HEIGHT = $('#Canvas').height();
            $('#Canvas').width(MAX_WIDTH).height(MAX_HEIGHT).css('border', 'ridge');
        })
    </script>
}